\documentclass{scrartcl}

% Copyright © 2015 Fabian Köhler <fkoehler1024@googlemail.com>
\usepackage{tikz}
\usetikzlibrary{math}

%%%%%%%%%%%%%%%%%
% Configuration %
%%%%%%%%%%%%%%%%%

% config variables
\tikzmath{
  % with of each processor
  \procWidth = 2.5;
  %
  % spacing between processors (hspace)
  \procSpace = 0.25;
  %
  % spacing between blocks (vspace9
  \blockSpace = 0.25;
  %
  % height of coarse sweep blocks
  \coarseHeight = 0.6;
  %
  % height of fine sweep blocks
  \fineHeight = 3;
}

% draw functions for elements (blocks, lines, ...)
\tikzmath{
  % specify how coarse sweep blocks will be drawn
  function drawCoarseSweep(\xa, \ya, \xb, \yb) {
      { \draw[red] (\xa, \ya) rectangle (\xb, \yb); };
  };
  % specify how fine sweep blocks will be drawn
  function drawFineSweep(\xa, \ya, \xb, \yb) {
      { \draw[blue] (\xa, \ya) rectangle (\xb, \yb); };
  };
}

\tikzmath{
  function procX1(\proc) {
      if \proc == 0 then {
        return \proc*\procWidth;
      } else {
        return \proc*\procWidth+\proc*\procSpace;
      };
  };
  function procX2(\proc) {
      if \proc == 0 then {
        return (\proc+1)*\procWidth;
      } else {
        return (\proc+1)*\procWidth+\proc*\procSpace;
      };
  };
  function blockY(\nCoarse, \nFine) {
      return \nCoarse*\coarseHeight+\nFine*\fineHeight+(\nCoarse+\nFine)*\blockSpace;
  };
  function coarseSweep(\proc, \nCoarse, \nFine) {
      \xa = procX1(\proc);
      \xb = procX2(\proc);
      \ya = blockY(\nCoarse, \nFine);
      \yb = \ya+\coarseHeight;
      drawCoarseSweep(\xa, \ya, \xb, \yb);
  };
  function fineSweep(\proc, \nCoarse, \nFine) {
      \xa = procX1(\proc);
      \xb = procX2(\proc);
      \ya = blockY(\nCoarse, \nFine);
      \yb = \ya+\fineHeight;
      drawFineSweep(\xa, \ya, \xb, \yb);
  };
}

\begin{document}
  \begin{tikzpicture}
    \tikzmath{
        coarseSweep(0, 0, 0);
        coarseSweep(1, 0, 0);
        coarseSweep(2, 0, 0);
        coarseSweep(3, 0, 0);
        coarseSweep(1, 1, 0);
        coarseSweep(2, 1, 0);
        coarseSweep(3, 1, 0);
        coarseSweep(2, 2, 0);
        coarseSweep(3, 2, 0);
        coarseSweep(3, 3, 0);
        fineSweep(0, 1, 0);
        fineSweep(1, 2, 0);
        fineSweep(2, 3, 0);
        fineSweep(3, 4, 0);
        coarseSweep(0, 1, 1);
        coarseSweep(1, 2, 1);
        coarseSweep(2, 3, 1);
        coarseSweep(3, 4, 1);
    }
  \end{tikzpicture}
\end{document}
